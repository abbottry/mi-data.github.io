$(function() {
  // Prepare demo data
  var data = [{
    'hc-key': 'us-mi-001',
    'value': 0
  }, {
    'hc-key': 'us-mi-003',
    'value': 8.695652174
  }, {
    'hc-key': 'us-mi-005',
    'value': 6.601941748
  }, {
    'hc-key': 'us-mi-007',
    'value': 3.956684715
  }, {
    'hc-key': 'us-mi-009',
    'value': 9.074410163
  }, {
    'hc-key': 'us-mi-011',
    'value': 8.257638315
  }, {
    'hc-key': 'us-mi-013',
    'value': 22.69288956
  }, {
    'hc-key': 'us-mi-015',
    'value': 8.820564516
  }, {
    'hc-key': 'us-mi-017',
    'value': 9.111156104
  }, {
    'hc-key': 'us-mi-019',
    'value': 10.06711409
  }, {
    'hc-key': 'us-mi-021',
    'value': 6.698297516
  }, {
    'hc-key': 'us-mi-023',
    'value': 9.723422645
  }, {
    'hc-key': 'us-mi-025',
    'value': 14.71358507
  }, {
    'hc-key': 'us-mi-027',
    'value': 8.36030205
  }, {
    'hc-key': 'us-mi-029',
    'value': 9.486166008
  }, {
    'hc-key': 'us-mi-031',
    'value': 5.522319374
  }, {
    'hc-key': 'us-mi-033',
    'value': 8.779631255
  }, {
    'hc-key': 'us-mi-035',
    'value': 6.117308384
  }, {
    'hc-key': 'us-mi-037',
    'value': 6.006425478
  }, {
    'hc-key': 'us-mi-039',
    'value': 5.898123324
  }, {
    'hc-key': 'us-mi-041',
    'value': 5.5717697
  }, {
    'hc-key': 'us-mi-043',
    'value': 0.651041667
  }, {
    'hc-key': 'us-mi-045',
    'value': 7.862629914
  }, {
    'hc-key': 'us-mi-047',
    'value': 0
  }, {
    'hc-key': 'us-mi-049',
    'value': 9.260420825
  }, {
    'hc-key': 'us-mi-051',
    'value': 4.032258065
  }, {
    'hc-key': 'us-mi-053',
    'value': 0.61500615
  }, {
    'hc-key': 'us-mi-055',
    'value': 5.278437582
  }, {
    'hc-key': 'us-mi-057',
    'value': 7.608695652
  }, {
    'hc-key': 'us-mi-059',
    'value': 6.166276845
  }, {
    'hc-key': 'us-mi-061',
    'value': 1.947798987
  }, {
    'hc-key': 'us-mi-063',
    'value': 1.929756851
  }, {
    'hc-key': 'us-mi-065',
    'value': 9.727938425
  }, {
    'hc-key': 'us-mi-067',
    'value': 5.202406113
  }, {
    'hc-key': 'us-mi-069',
    'value': 6.795324817
  }, {
    'hc-key': 'us-mi-071',
    'value': 14.35406699
  }, {
    'hc-key': 'us-mi-073',
    'value': 8.553100499
  }, {
    'hc-key': 'us-mi-075',
    'value': 11.71212822
  }, {
    'hc-key': 'us-mi-077',
    'value': 10.40760625
  }, {
    'hc-key': 'us-mi-079',
    'value': 12.98701299
  }, {
    'hc-key': 'us-mi-081',
    'value': 5.938739804
  }, {
    'hc-key': 'us-mi-083',
    'value': 0
  }, {
    'hc-key': 'us-mi-085',
    'value': 9.229098806
  }, {
    'hc-key': 'us-mi-087',
    'value': 2.439964043
  }, {
    'hc-key': 'us-mi-089',
    'value': 5.555555556
  }, {
    'hc-key': 'us-mi-091',
    'value': 9.194556822
  }, {
    'hc-key': 'us-mi-093',
    'value': 10.17834624
  }, {
    'hc-key': 'us-mi-095',
    'value': 3.773584906
  }, {
    'hc-key': 'us-mi-097',
    'value': 4.599816007
  }, {
    'hc-key': 'us-mi-099',
    'value': 11.46678909
  }, {
    'hc-key': 'us-mi-101',
    'value': 5.296343001
  }, {
    'hc-key': 'us-mi-103',
    'value': 11.25817739
  }, {
    'hc-key': 'us-mi-105',
    'value': 5.755395683
  }, {
    'hc-key': 'us-mi-107',
    'value': 3.863359089
  }, {
    'hc-key': 'us-mi-109',
    'value': 5.338078292
  }, {
    'hc-key': 'us-mi-111',
    'value': 2.019386107
  }, {
    'hc-key': 'us-mi-113',
    'value': 0
  }, {
    'hc-key': 'us-mi-115',
    'value': 15.86724806
  }, {
    'hc-key': 'us-mi-117',
    'value': 0.479616307
  }, {
    'hc-key': 'us-mi-119',
    'value': 2.105263158
  }, {
    'hc-key': 'us-mi-121',
    'value': 15.79090662
  }, {
    'hc-key': 'us-mi-123',
    'value': 7.101191986
  }, {
    'hc-key': 'us-mi-125',
    'value': 11.57121171
  }, {
    'hc-key': 'us-mi-127',
    'value': 7.060333761
  }, {
    'hc-key': 'us-mi-129',
    'value': 9.393680615
  }, {
    'hc-key': 'us-mi-131',
    'value': 14.70588235
  }, {
    'hc-key': 'us-mi-133',
    'value': 2.195389682
  }, {
    'hc-key': 'us-mi-135',
    'value': 10.09174312
  }, {
    'hc-key': 'us-mi-137',
    'value': 4.482758621
  }, {
    'hc-key': 'us-mi-139',
    'value': 7.087227414
  }, {
    'hc-key': 'us-mi-141',
    'value': 3.731343284
  }, {
    'hc-key': 'us-mi-143',
    'value': 6.256015399
  }, {
    'hc-key': 'us-mi-145',
    'value': 4.719915115
  }, {
    'hc-key': 'us-mi-151',
    'value': 7.305422872
  }, {
    'hc-key': 'us-mi-153',
    'value': 3.629764065
  }, {
    'hc-key': 'us-mi-155',
    'value': 6.513735486
  }, {
    'hc-key': 'us-mi-147',
    'value': 17.59029501
  }, {
    'hc-key': 'us-mi-149',
    'value': 6.853226728
  }, {
    'hc-key': 'us-mi-157',
    'value': 5.389306481
  }, {
    'hc-key': 'us-mi-159',
    'value': 8.376068376
  }, {
    'hc-key': 'us-mi-161',
    'value': 7.998439329
  }, {
    'hc-key': 'us-mi-163',
    'value': 13.48164809
  }, {
    'hc-key': 'us-mi-165',
    'value': 8.322496749
  }];


  // Initiate the chart
  $('#container').highcharts('Map', {

    title: {
      text: null
    },

    mapNavigation: {
      enabled: true,
      buttonOptions: {
        verticalAlign: 'bottom'
      }
    },

    series: [{
      data: data,
      mapData: Highcharts.maps['countries/us/us-mi-all'],
      joinBy: 'hc-key',
      name: 'Naloxone Usage Per 1,000 EMS Responses',
      states: {
        hover: {
          color: '#a4edba'
        }
      },
      dataLabels: {
        enabled: true,
        format: '{point.name}'
      }
    }],

    colorAxis: {
      stops: [
        [0, '#BDB8AE'],
        [0.25, '#DED5AC'],
        [0.5, '#E9E44B'],
        [0.75, '#DE983C'],
        [1, '#D3433E']
      ],
      min: 0,
      max: 20
    },

    credits: {
      enabled: false
    }
  });
});